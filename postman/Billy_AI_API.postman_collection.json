{
  "info": {
    "name": "Billy AI Marketing API",
    "description": "Complete API collection for LinkedIn Product Launch detection and email outreach automation. Includes authentication, company management, profile management, job tracking, and all API endpoints.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "refresh_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "company_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "profile_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "job_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "template_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "campaign_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "post_id",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('access_token', jsonData.access_token);",
                  "    pm.collectionVariables.set('refresh_token', jsonData.refresh_token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@test.com\",\n  \"password\": \"Test1234\",\n  \"first_name\": \"John\",\n  \"last_name\": \"Doe\",\n  \"company_name\": \"Test Company\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            },
            "description": "Register a new user and create a tenant workspace. First user becomes admin. Returns access_token and refresh_token."
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('access_token', jsonData.access_token);",
                  "    pm.collectionVariables.set('refresh_token', jsonData.refresh_token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@test.com\",\n  \"password\": \"Test1234\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            },
            "description": "Authenticate user and get JWT tokens. Returns access_token and refresh_token."
          }
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('access_token', jsonData.access_token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{refresh_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "refresh"]
            },
            "description": "Get a new access token using refresh token. Use when access token expires (24h)."
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "me"]
            },
            "description": "Get information about the currently authenticated user."
          }
        }
      ]
    },
    {
      "name": "Companies",
      "item": [
        {
          "name": "Create Company",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('company_id', jsonData.company.company_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"OpenAI\",\n  \"linkedin_url\": \"https://www.linkedin.com/company/openai/\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/companies",
              "host": ["{{baseUrl}}"],
              "path": ["api", "companies"]
            },
            "description": "Add a LinkedIn company to track for your tenant. Requires valid LinkedIn company URL format."
          }
        },
        {
          "name": "List Companies",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/companies?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "companies"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number (default: 1)"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Items per page (default: 20, max: 100)"
                },
                {
                  "key": "is_active",
                  "value": "true",
                  "description": "Filter by active status: true/false (optional)",
                  "disabled": true
                }
              ]
            },
            "description": "List all companies for your tenant with pagination. Optional filter by is_active status."
          }
        },
        {
          "name": "List Companies - Active Only",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/companies?is_active=true",
              "host": ["{{baseUrl}}"],
              "path": ["api", "companies"],
              "query": [
                {
                  "key": "is_active",
                  "value": "true"
                }
              ]
            },
            "description": "List only active companies for your tenant."
          }
        },
        {
          "name": "List Companies - Inactive Only",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/companies?is_active=false",
              "host": ["{{baseUrl}}"],
              "path": ["api", "companies"],
              "query": [
                {
                  "key": "is_active",
                  "value": "false"
                }
              ]
            },
            "description": "List only inactive (soft-deleted) companies for your tenant."
          }
        },
        {
          "name": "Update Company",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"OpenAI Research\",\n  \"is_active\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/companies/{{company_id}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "companies", "{{company_id}}"]
            },
            "description": "Update company fields (name, linkedin_url, is_active). Can update one or more fields. Must own the company."
          }
        },
        {
          "name": "Delete Company (Soft Delete)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/companies/{{company_id}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "companies", "{{company_id}}"]
            },
            "description": "Soft delete a company (sets is_active=false). Company data is preserved but marked inactive. Must own the company."
          }
        },
        {
          "name": "Scrape Company Posts",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/companies/{{company_id}}/scrape?max_posts=5",
              "host": ["{{baseUrl}}"],
              "path": ["api", "companies", "{{company_id}}", "scrape"],
              "query": [
                {
                  "key": "max_posts",
                  "value": "5",
                  "description": "Maximum number of posts to scrape (1-1000, default: 100)"
                }
              ]
            },
            "description": "Trigger LinkedIn post scraping for a company using Apify. Returns job_id immediately (async task). Scraped posts are saved to the database. Must own the company."
          }
        },
        {
          "name": "Scrape Company Posts (JSON Body)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"max_posts\": 10\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/companies/{{company_id}}/scrape",
              "host": ["{{baseUrl}}"],
              "path": ["api", "companies", "{{company_id}}", "scrape"]
            },
            "description": "Trigger LinkedIn post scraping with max_posts in request body instead of query parameter."
          }
        }
      ]
    },
    {
      "name": "Profiles",
      "item": [
        {
          "name": "Add Single Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('profile_id', jsonData.profile.profile_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"linkedin_url\": \"https://www.linkedin.com/in/johndoe/\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/profiles",
              "host": ["{{baseUrl}}"],
              "path": ["api", "profiles"]
            },
            "description": "Add a single LinkedIn profile URL manually. URL is validated and normalized. Returns profile_id."
          }
        },
        {
          "name": "List Profiles",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/profiles?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "profiles"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number (default: 1)"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Items per page (default: 20, max: 100)"
                },
                {
                  "key": "status",
                  "value": "scraped",
                  "description": "Filter by status: url_only, scraped, scraping_failed",
                  "disabled": true
                },
                {
                  "key": "company",
                  "value": "",
                  "description": "Filter by company name (partial match, case-insensitive)",
                  "disabled": true
                },
                {
                  "key": "location",
                  "value": "",
                  "description": "Filter by location (partial match, case-insensitive)",
                  "disabled": true
                },
                {
                  "key": "industry",
                  "value": "",
                  "description": "Filter by industry (partial match, case-insensitive)",
                  "disabled": true
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "Search in person_name, headline, company (case-insensitive, partial match)",
                  "disabled": true
                },
                {
                  "key": "sort",
                  "value": "created_at",
                  "description": "Sort field: created_at, person_name, scraped_at (default: created_at)",
                  "disabled": true
                },
                {
                  "key": "order",
                  "value": "desc",
                  "description": "Sort order: asc, desc (default: desc)",
                  "disabled": true
                }
              ]
            },
            "description": "List all profiles for your tenant with filtering, search, pagination, and sorting. Returns profiles array, pagination metadata, and stats (total, scraped, pending, failed)."
          }
        },
        {
          "name": "List Profiles - Filter by Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/profiles?status=scraped",
              "host": ["{{baseUrl}}"],
              "path": ["api", "profiles"],
              "query": [
                {
                  "key": "status",
                  "value": "scraped"
                }
              ]
            },
            "description": "List only scraped profiles."
          }
        },
        {
          "name": "List Profiles - Search",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/profiles?search=John",
              "host": ["{{baseUrl}}"],
              "path": ["api", "profiles"],
              "query": [
                {
                  "key": "search",
                  "value": "John"
                }
              ]
            },
            "description": "Search profiles by name, headline, or company."
          }
        },
        {
          "name": "List Profiles - Combined Filters",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/profiles?status=scraped&company=Tech&location=San Francisco&page=1&limit=20&sort=scraped_at&order=desc",
              "host": ["{{baseUrl}}"],
              "path": ["api", "profiles"],
              "query": [
                {
                  "key": "status",
                  "value": "scraped"
                },
                {
                  "key": "company",
                  "value": "Tech"
                },
                {
                  "key": "location",
                  "value": "San Francisco"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "sort",
                  "value": "scraped_at"
                },
                {
                  "key": "order",
                  "value": "desc"
                }
              ]
            },
            "description": "Example of combined filters: status, company, location with pagination and sorting."
          }
        },
        {
          "name": "Bulk Upload Profiles (CSV)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": [],
                  "description": "CSV file with LinkedIn profile URLs. First column should be linkedin_url. Optional columns: name, notes."
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/profiles/bulk-upload",
              "host": ["{{baseUrl}}"],
              "path": ["api", "profiles", "bulk-upload"]
            },
            "description": "Upload multiple LinkedIn profile URLs via CSV file. Maximum 1000 profiles per upload. CSV can have header row with 'linkedin_url' and optional 'name' column, or just URLs in first column."
          }
        },
        {
          "name": "Download Bulk Upload Template",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/profiles/bulk-upload/template",
              "host": ["{{baseUrl}}"],
              "path": ["api", "profiles", "bulk-upload", "template"]
            },
            "description": "Download CSV template for bulk profile uploads. Template includes example row with linkedin_url, name, and notes columns."
          }
        },
        {
          "name": "Scrape All Profiles",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 202) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('job_id', jsonData.job_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/profiles/scrape",
              "host": ["{{baseUrl}}"],
              "path": ["api", "profiles", "scrape"]
            },
            "description": "Scrape all profiles with status='url_only' for your tenant. Returns job_id immediately (async task). Processes up to 50 profiles per job. Use job_id to check status via GET /api/jobs/{job_id}."
          }
        },
        {
          "name": "Scrape Single Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 202) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('job_id', jsonData.job_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/profiles/{{profile_id}}/scrape",
              "host": ["{{baseUrl}}"],
              "path": ["api", "profiles", "{{profile_id}}", "scrape"]
            },
            "description": "Scrape a single profile by ID. Returns job_id immediately (async task). Use job_id to check status via GET /api/jobs/{job_id}."
          }
        }
      ]
    },
    {
      "name": "Jobs",
      "item": [
        {
          "name": "Get Job Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/jobs/{{job_id}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "jobs", "{{job_id}}"]
            },
            "description": "Get the status of an async job (e.g., profile scraping, post scraping). Returns job details including status (pending, processing, completed, failed), progress, results, and error messages if any. Must own the job (same tenant)."
          }
        }
      ]
    },
    {
      "name": "Templates",
      "item": [
        {
          "name": "List Templates",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/templates",
              "host": ["{{baseUrl}}"],
              "path": ["api", "templates"]
            },
            "description": "List all email templates (default templates + your custom templates). Returns templates with detected variables."
          }
        },
        {
          "name": "Get Template by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/templates/00000000-0000-0000-0000-000000000001",
              "host": ["{{baseUrl}}"],
              "path": ["api", "templates", "00000000-0000-0000-0000-000000000001"]
            },
            "description": "Get a single template by ID. Default templates are visible to all tenants. Custom templates only visible to owner."
          }
        },
        {
          "name": "Create Custom Template",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"My Custom Template\",\n  \"subject\": \"Hello {{recipient_name}}\",\n  \"body\": \"Hi {{recipient_name}}, this is a custom email from {{sender_name}} about {{product_name}}.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/templates",
              "host": ["{{baseUrl}}"],
              "path": ["api", "templates"]
            },
            "description": "Create a custom email template for your tenant. Supported variables: {{recipient_name}}, {{company_name}}, {{product_name}}, {{sender_name}}, {{post_summary}}"
          }
        },
        {
          "name": "Update Template",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Template Name\",\n  \"subject\": \"Updated: Hello {{recipient_name}}\",\n  \"body\": \"Updated body text\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/templates/{{template_id}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "templates", "{{template_id}}"]
            },
            "description": "Update a custom template (name, subject, body). Cannot update default templates. Only owner can update."
          }
        },
        {
          "name": "Delete Template",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/templates/{{template_id}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "templates", "{{template_id}}"]
            },
            "description": "Delete a custom template. Cannot delete default templates. Only owner can delete."
          }
        },
        {
          "name": "Preview Template",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"recipient_name\": \"John Doe\",\n  \"company_name\": \"Acme Corp\",\n  \"product_name\": \"New Product\",\n  \"sender_name\": \"Jane Smith\",\n  \"post_summary\": \"Exciting new launch!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/templates/00000000-0000-0000-0000-000000000001/preview",
              "host": ["{{baseUrl}}"],
              "path": ["api", "templates", "00000000-0000-0000-0000-000000000001", "preview"]
            },
            "description": "Preview a template with sample data. Replaces all placeholders with provided values. Returns rendered subject and body."
          }
        }
      ]
    },
    {
      "name": "Campaigns",
      "item": [
        {
          "name": "List Campaigns",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/campaigns?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "campaigns"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "List all campaigns for your tenant with pagination."
          }
        },
        {
          "name": "Get Campaign by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/campaigns/{{campaign_id}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "campaigns", "{{campaign_id}}"]
            },
            "description": "Get a single campaign by ID with profile details."
          }
        },
        {
          "name": "Create Campaign",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('campaign_id', jsonData.campaign.campaign_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Product Launch Campaign\",\n  \"post_id\": \"{{post_id}}\",\n  \"profile_ids\": [\"{{profile_id}}\"],\n  \"status\": \"draft\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/campaigns",
              "host": ["{{baseUrl}}"],
              "path": ["api", "campaigns"]
            },
            "description": "Create a new campaign linking a post with profiles. Requires valid post_id and at least one profile_id. Status: draft, active, or completed."
          }
        },
        {
          "name": "Delete Campaign",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/campaigns/{{campaign_id}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "campaigns", "{{campaign_id}}"]
            },
            "description": "Delete a campaign. Only owner can delete."
          }
        }
      ]
    },
    {
      "name": "Emails",
      "item": [
        {
          "name": "List Emails",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/emails?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "emails"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "draft",
                  "description": "Filter by status: draft, sent, failed",
                  "disabled": true
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "Search in subject and recipient name",
                  "disabled": true
                }
              ]
            },
            "description": "List all emails for your tenant with filtering, pagination, and search. Only non-deleted emails are returned."
          }
        }
      ]
    },
    {
      "name": "Posts",
      "item": [
        {
          "name": "Analyze Single Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 202) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('job_id', jsonData.job_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{post_id}}/analyze",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{post_id}}", "analyze"]
            },
            "description": "Analyze a single post using Claude AI. Returns job_id immediately (async task). Use job_id to check status via GET /api/jobs/{job_id}."
          }
        },
        {
          "name": "Analyze Batch Posts",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 202) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.job_ids && jsonData.job_ids.length > 0) {",
                  "        pm.collectionVariables.set('job_id', jsonData.job_ids[0]);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"post_ids\": [\"{{post_id}}\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts/analyze-batch",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "analyze-batch"]
            },
            "description": "Analyze multiple posts in batch. Maximum 100 posts per batch. Returns job_ids for tracking."
          }
        }
      ]
    },
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "url": {
          "raw": "{{baseUrl}}/api/health",
          "host": ["{{baseUrl}}"],
          "path": ["api", "health"]
        },
        "description": "Check if the API server is running and healthy."
      }
    }
  ]
}
